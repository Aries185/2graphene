commit ae4887222fb93ee205bbaabe45f5a851df4850d2
Author: Daniel Micay <danielmicay@gmail.com>
Date:   Mon 2020-11-02 11:14:05-0500

    constify JNINativeMethod tables
---
 jni_jpegstream/src/jpegstream.cpp | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/jni_jpegstream/src/jpegstream.cpp b/jni_jpegstream/src/jpegstream.cpp
index afff64ce1b85115276f80d389621dcf92436fe07..4214944ab3d3d15d76faff4a94302cd5126fffb6 100644
--- a/jni_jpegstream/src/jpegstream.cpp
+++ b/jni_jpegstream/src/jpegstream.cpp
@@ -289,34 +289,34 @@ static jint InputStream_skipDecodedBytes(JNIEnv* env, jobject thiz,
     // Read with null buffer to skip
     skip = r_ptr->read(NULL, 0, bytes);
     return skip;
 }
 
 static const char *outClassPathName =
         "com/android/gallery3d/jpegstream/JPEGOutputStream";
 static const char *inClassPathName =
         "com/android/gallery3d/jpegstream/JPEGInputStream";
 
-static JNINativeMethod writeMethods[] = { { "setup",
+static const JNINativeMethod writeMethods[] = { { "setup",
         "(Ljava/io/OutputStream;IIII)I", (void*) OutputStream_setup }, {
         "cleanup", "()V", (void*) OutputStream_cleanup }, { "writeInputBytes",
         "([BII)I", (void*) OutputStream_writeInputBytes } };
 
-static JNINativeMethod readMethods[] = { { "setup",
+static const JNINativeMethod readMethods[] = { { "setup",
         "(Landroid/graphics/Point;Ljava/io/InputStream;I)I",
         (void*) InputStream_setup }, { "cleanup", "()V",
         (void*) InputStream_cleanup }, { "readDecodedBytes", "([BII)I",
         (void*) InputStream_readDecodedBytes }, { "skipDecodedBytes", "(I)I",
         (void*) InputStream_skipDecodedBytes } };
 
 static int registerNativeMethods(JNIEnv* env, const char* className,
-        JNINativeMethod* gMethods, int numMethods) {
+        const JNINativeMethod* gMethods, int numMethods) {
     jclass clazz;
     clazz = env->FindClass(className);
     if (clazz == NULL) {
         LOGE("Native registration unable to find class '%s'", className);
         return JNI_FALSE;
     }
     if (env->RegisterNatives(clazz, gMethods, numMethods) < 0) {
         LOGE("RegisterNatives failed for '%s'", className);
         return JNI_FALSE;
     }

commit 68754b1ea4fb1b46bdd4ac2f926724778208adec
Author: flawedworld <flawedworld@flawed.world>
Date:   Sat 2022-02-05 17:06:29+0000

    Add GrapheneOS icon
---
 AndroidManifest.xml                           |  5 ++++-
 res/drawable/ic_launcher_foreground.xml (new) | 26 ++++++++++++++++++++++++++
 res/mipmap-anydpi/ic_launcher.xml (new)       |  5 +++++
 res/mipmap-anydpi/ic_launcher_round.xml (new) |  5 +++++
 res/values/ic_launcher_background.xml (new)   |  4 ++++
 5 files changed, 44 insertions(+), 1 deletion(-)

diff --git a/AndroidManifest.xml b/AndroidManifest.xml
index a99c80bb3c83400bda445f73deff6d58ef6da687..bf431bd96112e51b0072b1541d3bb45b299bc38c 100644
--- a/AndroidManifest.xml
+++ b/AndroidManifest.xml
@@ -29,21 +29,24 @@
     <uses-permission android:name="android.permission.WAKE_LOCK" />
     <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
     <uses-permission android:name="android.permission.WRITE_SETTINGS" />
     <uses-permission android:name="android.permission.WRITE_SYNC_SETTINGS" />
     <uses-permission android:name="com.android.gallery3d.permission.GALLERY_PROVIDER" />
 
     <supports-screens android:smallScreens="false"
             android:normalScreens="true" android:largeScreens="true"
             android:anyDensity="true" />
 
-    <application android:icon="@mipmap/ic_launcher_gallery" android:label="@string/app_name"
+    <application 
+            android:icon="@mipmap/ic_launcher"
+            android:roundIcon="@mipmap/ic_launcher_round"
+            android:label="@string/app_name"
             android:name="com.android.gallery3d.app.GalleryAppImpl"
             android:theme="@style/Theme.Gallery"
             android:logo="@mipmap/ic_launcher_gallery"
             android:hardwareAccelerated="true"
             android:largeHeap="true"
             android:restoreAnyVersion="true"
             android:supportsRtl="true"
             android:requestLegacyExternalStorage="true"
             usesCleartextHttp="true">
         <uses-library android:name="com.google.android.media.effects" android:required="false" />
diff --git a/res/drawable/ic_launcher_foreground.xml b/res/drawable/ic_launcher_foreground.xml
new file mode 100644
index 0000000000000000000000000000000000000000..84af4de7deb212e511ce0820efdf44861fc09565
--- /dev/null
+++ b/res/drawable/ic_launcher_foreground.xml
@@ -0,0 +1,26 @@
+<!--
+  Copyright (C) 2021 Google Inc.
+  Licensed under the Apache License, Version 2.0 (the "License");
+  you may not use this file except in compliance with the License.
+  You may obtain a copy of the License at
+    http://www.apache.org/licenses/LICENSE-2.0
+  Unless required by applicable law or agreed to in writing, software
+  distributed under the License is distributed on an "AS IS" BASIS,
+  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+  See the License for the specific language governing permissions and
+  limitations under the License.
+  -->
+<vector xmlns:android="http://schemas.android.com/apk/res/android"
+    android:width="108dp"
+    android:height="108dp"
+    android:viewportWidth="108"
+    android:viewportHeight="108">
+  <group android:scaleX="2.25"
+      android:scaleY="2.25"
+      android:translateX="27"
+      android:translateY="27">
+    <path
+        android:fillColor="@android:color/black"
+        android:pathData="M22,18L22,2L6,2v16h16zM11,12l2.03,2.71L16,11l4,5L8,16l3,-4zM2,6v16h16v-2L4,20L4,6L2,6z"/>
+  </group>
+</vector>
diff --git a/res/mipmap-anydpi/ic_launcher.xml b/res/mipmap-anydpi/ic_launcher.xml
new file mode 100644
index 0000000000000000000000000000000000000000..a8a8fa5518fcdb2db0385028800968b2667af71e
--- /dev/null
+++ b/res/mipmap-anydpi/ic_launcher.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
+    <background android:drawable="@color/ic_launcher_background" />
+    <foreground android:drawable="@drawable/ic_launcher_foreground" />
+</adaptive-icon>
diff --git a/res/mipmap-anydpi/ic_launcher_round.xml b/res/mipmap-anydpi/ic_launcher_round.xml
new file mode 100644
index 0000000000000000000000000000000000000000..a8a8fa5518fcdb2db0385028800968b2667af71e
--- /dev/null
+++ b/res/mipmap-anydpi/ic_launcher_round.xml
@@ -0,0 +1,5 @@
+<?xml version="1.0" encoding="utf-8"?>
+<adaptive-icon xmlns:android="http://schemas.android.com/apk/res/android">
+    <background android:drawable="@color/ic_launcher_background" />
+    <foreground android:drawable="@drawable/ic_launcher_foreground" />
+</adaptive-icon>
diff --git a/res/values/ic_launcher_background.xml b/res/values/ic_launcher_background.xml
new file mode 100644
index 0000000000000000000000000000000000000000..f42ada656ee26e30d170aaa67989f0f15c1a300b
--- /dev/null
+++ b/res/values/ic_launcher_background.xml
@@ -0,0 +1,4 @@
+<?xml version="1.0" encoding="utf-8"?>
+<resources>
+    <color name="ic_launcher_background">#FFFFFF</color>
+</resources>

commit 3d38afc0f507867fcac7840df96faaa8ce90aecf
Author: flawedworld <flawedworld@flawed.world>
Date:   Sat 2022-02-05 17:06:43+0000

    Bump minSdkVersion to 29
---
 AndroidManifest.xml | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/AndroidManifest.xml b/AndroidManifest.xml
index bf431bd96112e51b0072b1541d3bb45b299bc38c..48395772b9ca44f2c2d46fd82862d4bd5e3bfb3d 100644
--- a/AndroidManifest.xml
+++ b/AndroidManifest.xml
@@ -1,20 +1,20 @@
 <?xml version="1.0" encoding="utf-8"?>
 
 <manifest android:versionCode="40030"
         android:versionName="1.1.40030"
         xmlns:android="http://schemas.android.com/apk/res/android"
         package="com.android.gallery3d">
 
     <original-package android:name="com.android.gallery3d" />
 
-    <uses-sdk android:minSdkVersion="14" android:targetSdkVersion="29" />
+    <uses-sdk android:minSdkVersion="29" android:targetSdkVersion="29" />
 
     <permission android:name="com.android.gallery3d.permission.GALLERY_PROVIDER"
             android:protectionLevel="signatureOrSystem" />
 
     <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
     <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
     <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
     <uses-permission android:name="android.permission.CAMERA" />
     <uses-permission android:name="android.permission.GET_ACCOUNTS" />
     <uses-permission android:name="android.permission.INTERNET" />

commit d5338e95ff503b5e5f0799e6bab0d2bbf09381ee
Author: Joey <joey@lineageos.org>
Date:   Thu 2018-01-25 12:20:24+0100

    Gallery: define app category
    
    Change-Id: I04a4650a55bf45cfeb103d5fedc0cf7ff67197e5
    Signed-off-by: Joey <joey@lineageos.org>
---
 AndroidManifest.xml | 1 +
 1 file changed, 1 insertion(+)

diff --git a/AndroidManifest.xml b/AndroidManifest.xml
index 48395772b9ca44f2c2d46fd82862d4bd5e3bfb3d..610f6338949597be31f54c7f56a3437d373a59f7 100644
--- a/AndroidManifest.xml
+++ b/AndroidManifest.xml
@@ -38,20 +38,21 @@
 
     <application 
             android:icon="@mipmap/ic_launcher"
             android:roundIcon="@mipmap/ic_launcher_round"
             android:label="@string/app_name"
             android:name="com.android.gallery3d.app.GalleryAppImpl"
             android:theme="@style/Theme.Gallery"
             android:logo="@mipmap/ic_launcher_gallery"
             android:hardwareAccelerated="true"
             android:largeHeap="true"
+            android:appCategory="image"
             android:restoreAnyVersion="true"
             android:supportsRtl="true"
             android:requestLegacyExternalStorage="true"
             usesCleartextHttp="true">
         <uses-library android:name="com.google.android.media.effects" android:required="false" />
         <uses-library android:name="org.apache.http.legacy" android:required="false" />
         <activity android:name="com.android.gallery3d.app.MovieActivity"
                 android:label="@string/movie_view_label"
                 android:exported="true"
                 android:configChanges="orientation|keyboardHidden|screenSize">

commit 1ff2f14e4131aa7c842da439b7ed205edc404c07 (HEAD, tag: SP2A.220305.012.2022030801, m/master, grapheneos/12.1)
Author: smdyv <88971341+smdyv@users.noreply.github.com>
Date:   Wed 2022-02-09 11:44:33+0100

    Replace launcher icon
---
 res/drawable/ic_launcher_foreground.xml | 20 ++++++++++++--------
 1 file changed, 12 insertions(+), 8 deletions(-)

diff --git a/res/drawable/ic_launcher_foreground.xml b/res/drawable/ic_launcher_foreground.xml
index 84af4de7deb212e511ce0820efdf44861fc09565..362169aa47bbe2da4ab3bd821ee8660068749ddf 100644
--- a/res/drawable/ic_launcher_foreground.xml
+++ b/res/drawable/ic_launcher_foreground.xml
@@ -1,26 +1,30 @@
 <!--
   Copyright (C) 2021 Google Inc.
+
   Licensed under the Apache License, Version 2.0 (the "License");
   you may not use this file except in compliance with the License.
   You may obtain a copy of the License at
+
     http://www.apache.org/licenses/LICENSE-2.0
+
   Unless required by applicable law or agreed to in writing, software
   distributed under the License is distributed on an "AS IS" BASIS,
   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   See the License for the specific language governing permissions and
   limitations under the License.
   -->
 <vector xmlns:android="http://schemas.android.com/apk/res/android"
     android:width="108dp"
     android:height="108dp"
     android:viewportWidth="108"
     android:viewportHeight="108">
-  <group android:scaleX="2.25"
-      android:scaleY="2.25"
-      android:translateX="27"
-      android:translateY="27">
-    <path
-        android:fillColor="@android:color/black"
-        android:pathData="M22,18L22,2L6,2v16h16zM11,12l2.03,2.71L16,11l4,5L8,16l3,-4zM2,6v16h16v-2L4,20L4,6L2,6z"/>
-  </group>
+    <group
+        android:scaleX="2.43375"
+        android:scaleY="2.43375"
+        android:translateX="24.795"
+        android:translateY="24.795">
+        <path
+            android:fillColor="#000000"
+            android:pathData="M20,18V6c0,-1.1 -0.9,-2 -2,-2H6c-1.1,0 -2,0.9 -2,2V18c0,1.1 0.9,2 2,2H18c1.1,0 2,-0.9 2,-2zM9.4,14.53 L11.03,16.71 13.61,13.49c0.2,-0.25 0.58,-0.25 0.78,0l2.96,3.7C17.61,17.52 17.38,18 16.96,18H7C6.59,18 6.35,17.53 6.6,17.2l2,-2.67c0.2,-0.26 0.6,-0.26 0.8,0z" />
+    </group>
 </vector>
