commit d0b31c66421d7619b23b15098b28d63733b110e3
Author: Artem Borisov <dedsa2002@gmail.com>
Date:   Fri 2020-11-20 11:18:01+0000

    Set sane value for PRODUCT_MODEL
    
    Change-Id: I71bb754f2e636269dcb9ec13fdf1b4f911240743
    Signed-off-by: anupritaisno1 <www.anuprita804@gmail.com>
---
 aosp_redfin.mk | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/aosp_redfin.mk b/aosp_redfin.mk
index 10b4b21a6a769d2eef94be807d430779f7b33c07..a5ccad1b0eec37d8d9877a6cdc66da8b05fa60dd 100644
--- a/aosp_redfin.mk
+++ b/aosp_redfin.mk
@@ -67,11 +67,11 @@ PRODUCT_BUILD_SUPER_PARTITION := false
 # b/113232673 STOPSHIP deal with Qualcomm stuff later
 # PRODUCT_RESTRICT_VENDOR_FILES := all
 
 # b/189477034: Bypass build time check on uses_libs until vendor fixes all their apps
 PRODUCT_BROKEN_VERIFY_USES_LIBRARIES := true
 
 PRODUCT_MANUFACTURER := Google
 PRODUCT_BRAND := Android
 PRODUCT_NAME := aosp_redfin
 PRODUCT_DEVICE := redfin
-PRODUCT_MODEL := AOSP on redfin
+PRODUCT_MODEL := Pixel 5

commit 746a5d698774c4badc708eb38e57525e2cdee18a
Author: Daniel Micay <danielmicay@gmail.com>
Date:   Thu 2021-07-15 20:12:44-0400

    set PRODUCT_BRAND to hardware brand
---
 aosp_redfin.mk | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/aosp_redfin.mk b/aosp_redfin.mk
index a5ccad1b0eec37d8d9877a6cdc66da8b05fa60dd..deda1b4899488e78f68959dab46f6008fbb76555 100644
--- a/aosp_redfin.mk
+++ b/aosp_redfin.mk
@@ -64,14 +64,14 @@ endif
 # Don't build super.img.
 PRODUCT_BUILD_SUPER_PARTITION := false
 
 # b/113232673 STOPSHIP deal with Qualcomm stuff later
 # PRODUCT_RESTRICT_VENDOR_FILES := all
 
 # b/189477034: Bypass build time check on uses_libs until vendor fixes all their apps
 PRODUCT_BROKEN_VERIFY_USES_LIBRARIES := true
 
 PRODUCT_MANUFACTURER := Google
-PRODUCT_BRAND := Android
+PRODUCT_BRAND := google
 PRODUCT_NAME := aosp_redfin
 PRODUCT_DEVICE := redfin
 PRODUCT_MODEL := Pixel 5

commit 50f8431372f2aa8e232087b60a46ab033b6adfa5
Author: Daniel Micay <danielmicay@gmail.com>
Date:   Thu 2021-07-15 23:55:44-0400

    remove aosp_ prefix from product name
---
 AndroidProducts.mk | 4 ++--
 redfin.mk (new)    | 5 +++++
 2 files changed, 7 insertions(+), 2 deletions(-)

diff --git a/AndroidProducts.mk b/AndroidProducts.mk
index bc17b20c50b94f5d51e002e1f98cc01dd039b925..caa09f47800cd575d0f1ce8caf907d67967a79ac 100644
--- a/AndroidProducts.mk
+++ b/AndroidProducts.mk
@@ -8,18 +8,18 @@
 #      http://www.apache.org/licenses/LICENSE-2.0
 #
 # Unless required by applicable law or agreed to in writing, software
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
 #
 
 PRODUCT_MAKEFILES := \
-    $(LOCAL_DIR)/aosp_redfin.mk \
+    $(LOCAL_DIR)/redfin.mk \
     $(LOCAL_DIR)/aosp_redfin_64.mk \
     $(LOCAL_DIR)/vf/aosp_redfin_vf.mk \
     $(LOCAL_DIR)/aosp_redfin_hwasan.mk \
 
 COMMON_LUNCH_CHOICES := \
-    aosp_redfin-userdebug \
+    redfin-userdebug \
     aosp_redfin_vf-userdebug \
diff --git a/redfin.mk b/redfin.mk
new file mode 100644
index 0000000000000000000000000000000000000000..c4b2b589da33f1e4ba07b4d6d63c1f2deb4446d0
--- /dev/null
+++ b/redfin.mk
@@ -0,0 +1,5 @@
+# Inherit AOSP product configuration
+$(call inherit-product, device/google/redfin/aosp_redfin.mk)
+
+# Remove AOSP prefix from product name
+PRODUCT_NAME := redfin

commit 87a69238d56b579cac8340a4352d7addf26013ee
Author: Artem Borisov <dedsa2002@gmail.com>
Date:   Fri 2020-11-20 11:50:44+0000

    Move to monolithic kernel builds
    
    Change-Id: I645ff647a1f1d3f882aaf2e3f1a562f248502cf5
    Signed-off-by: anupritaisno1 <www.anuprita804@gmail.com>
---
 init.insmod.redfin.cfg | 4 ----
 1 file changed, 4 deletions(-)

diff --git a/init.insmod.redfin.cfg b/init.insmod.redfin.cfg
index 4f65487b378783fcb0a31aecdb58091be5c604fc..3ea3d56fe191c4adfe5b62661987a17d4cbb4f95 100644
--- a/init.insmod.redfin.cfg
+++ b/init.insmod.redfin.cfg
@@ -1,19 +1,15 @@
 #############################################
 #           init.insmod.cfg                 #
 # This file contains kernel modules to load #
 # at init time by init.insmod.sh script     #
 #############################################
 
-# Load kernel modules
-modprobe|-b *
-modprobe|sec_touch.ko
-
 # All modules loaded
 setprop|vendor.all.modules.ready
 
 # Boot devices
 enable|/sys/kernel/boot_adsp/boot
 enable|/sys/kernel/boot_cdsp/boot
 
 # All devices enabled
 setprop|vendor.all.devices.ready

commit 48b0bdd9a43d356ea3a298ec3ad5c6b7cb48afb0
Author: anupritaisno1 <www.anuprita804@gmail.com>
Date:   Fri 2021-01-15 17:14:54+0530

    specify TARGET_PREBUILT_KERNEL
    
    Signed-off-by: anupritaisno1 <www.anuprita804@gmail.com>
    Change-Id: I8a9077482e8a9a0e61bee3c398509239ed8d5ab5
---
 device-redfin.mk | 1 +
 1 file changed, 1 insertion(+)

diff --git a/device-redfin.mk b/device-redfin.mk
index 6d6d43a223bdc62c88d0a68b7225182659dad2fd..ad44faae3fc3af38dd19337664a8d4029e749687 100644
--- a/device-redfin.mk
+++ b/device-redfin.mk
@@ -9,20 +9,21 @@
 #
 # Unless required by applicable law or agreed to in writing, software
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
 #
 
 PRODUCT_HARDWARE := redfin
 
+TARGET_PREBUILT_KERNEL := device/google/redfin-kernel/Image.lz4
 ifeq ($(TARGET_PREBUILT_KERNEL),)
     ifneq (,$(filter userdebug eng, $(TARGET_BUILD_VARIANT)))
         LOCAL_KERNEL := device/google/redbull-kernel/Image.lz4
     else
         LOCAL_KERNEL := device/google/redbull-kernel/vintf/Image.lz4
     endif
 else
     LOCAL_KERNEL := $(TARGET_PREBUILT_KERNEL)
 endif
 

commit 84c93bbfcea2954b21e284cafd483a3d02b75dba
Author: Danny Lin <danny@kdrag0n.dev>
Date:   Mon 2020-11-02 19:43:49-0800

    redfin: Enable refresh rate toggle in Settings
    
    Redfin supports switching between 60 and 90 Hz refresh rates, so let's
    expose it in Settings -> Display -> Smooth Display for users to save
    battery if necessary.
    
    Test: visual confirmation after toggling several times
    Change-Id: Ie698ec4d4e738afd2a9055dba2369233103a4f13
---
 .../apps/Settings/res/values/config.xml (new)        | 20 ++++++++++++++++++++
 1 file changed, 20 insertions(+)

diff --git a/redfin/overlay/packages/apps/Settings/res/values/config.xml b/redfin/overlay/packages/apps/Settings/res/values/config.xml
new file mode 100644
index 0000000000000000000000000000000000000000..283ff25ff50d03d6e7d8c1651a74e66de6bb1f3d
--- /dev/null
+++ b/redfin/overlay/packages/apps/Settings/res/values/config.xml
@@ -0,0 +1,20 @@
+<?xml version="1.0" encoding="utf-8"?>
+<!--
+    Copyright (C) 2020 The Proton AOSP Project
+
+    Licensed under the Apache License, Version 2.0 (the "License");
+    you may not use this file except in compliance with the License.
+    You may obtain a copy of the License at
+
+        http://www.apache.org/licenses/LICENSE-2.0
+
+    Unless required by applicable law or agreed to in writing, software
+    distributed under the License is distributed on an "AS IS" BASIS,
+    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
+    See the License for the specific language governing permissions and
+    limitations under the License.
+-->
+<resources>
+    <!-- Whether to show Smooth Display feature in Settings Options -->
+    <bool name="config_show_smooth_display">true</bool>
+</resources>

commit 4ba4468b7771734fd8c21b26ba1f25aed8480ca0
Author: Daniel Micay <danielmicay@gmail.com>
Date:   Tue 2021-03-02 05:58:23-0500

    use device-specific kernel headers
---
 device-redfin.mk | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/device-redfin.mk b/device-redfin.mk
index ad44faae3fc3af38dd19337664a8d4029e749687..47598577489f7afb0a184ca8e2da7e3b0ccfbf2c 100644
--- a/device-redfin.mk
+++ b/device-redfin.mk
@@ -20,21 +20,21 @@ TARGET_PREBUILT_KERNEL := device/google/redfin-kernel/Image.lz4
 ifeq ($(TARGET_PREBUILT_KERNEL),)
     ifneq (,$(filter userdebug eng, $(TARGET_BUILD_VARIANT)))
         LOCAL_KERNEL := device/google/redbull-kernel/Image.lz4
     else
         LOCAL_KERNEL := device/google/redbull-kernel/vintf/Image.lz4
     endif
 else
     LOCAL_KERNEL := $(TARGET_PREBUILT_KERNEL)
 endif
 
-PRODUCT_VENDOR_KERNEL_HEADERS := device/google/redbull-kernel/sm7250/kernel-headers
+PRODUCT_VENDOR_KERNEL_HEADERS := device/google/redfin-kernel/sm7250/kernel-headers
 
 include build/make/target/product/iorap_large_memory_config.mk
 include device/google/redbull/device-common.mk
 
 $(call inherit-product, $(SRC_TARGET_DIR)/product/virtual_ab_ota/compression.mk)
 
 # LOCAL_PATH is device/google/redbull before this
 LOCAL_PATH := device/google/redfin
 
 PRODUCT_SOONG_NAMESPACES += \

commit 6d0068135a63e7c5b4609a99265c207d2d20cdfb
Author: Philip Rinn <rinni@inventati.org>
Date:   Sun 2021-06-20 14:32:51+0200

    Add the set of PIXEL_*_EXPERIENCE features for redfin
---
 device-redfin.mk            |  4 ++++
 google_experience.xml (new) | 12 ++++++++++++
 2 files changed, 16 insertions(+)

diff --git a/device-redfin.mk b/device-redfin.mk
index 47598577489f7afb0a184ca8e2da7e3b0ccfbf2c..5013fa260a828b827701ff1c8a7a283c69331357 100644
--- a/device-redfin.mk
+++ b/device-redfin.mk
@@ -238,10 +238,14 @@ PRODUCT_PACKAGES += \
 
 # (b/183612348): Enable skia reduceOpsTaskSplitting
 PRODUCT_PROPERTY_OVERRIDES += \
     renderthread.skia.reduceopstasksplitting=true
 
 # Include the redfin product FCM.
 # Vendor Freeze system-only builds use a different FCM.
 ifneq ($(PRODUCT_VENDOR_FREEZE_SYSTEM_BUILD),true)
 PRODUCT_PACKAGES += redfin_product_compatibility_matrix.xml
 endif
+
+# Set of *_EXPERIENCE features for redfin
+PRODUCT_COPY_FILES += \
+    $(LOCAL_PATH)/google_experience.xml:$(TARGET_COPY_OUT_PRODUCT)/etc/sysconfig/google_experience.xml
diff --git a/google_experience.xml b/google_experience.xml
new file mode 100644
index 0000000000000000000000000000000000000000..5d0182c7f8816207afc386c031c52b126e46d4f2
--- /dev/null
+++ b/google_experience.xml
@@ -0,0 +1,12 @@
+<?xml version="1.0" encoding="utf-8"?>
+
+<config>
+    <feature name="com.google.android.feature.GOOGLE_EXPERIENCE" />
+    <feature name="com.google.android.feature.PIXEL_EXPERIENCE" />
+    <feature name="com.google.android.feature.PIXEL_2017_EXPERIENCE" />
+    <feature name="com.google.android.feature.PIXEL_2018_EXPERIENCE" />
+    <feature name="com.google.android.feature.PIXEL_2019_MIDYEAR_EXPERIENCE" />
+    <feature name="com.google.android.feature.PIXEL_2019_EXPERIENCE" />
+    <feature name="com.google.android.feature.PIXEL_2020_MIDYEAR_EXPERIENCE" />
+    <feature name="com.google.android.feature.PIXEL_2020_EXPERIENCE" />
+</config>

commit 7285001d09088d42c63ad651713ce7be2e93da5d
Author: flawedworld <flawedworld@flawed.world>
Date:   Sun 2021-10-10 02:42:23+0100

    Add vendor soong namespace
---
 aosp_redfin.mk | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/aosp_redfin.mk b/aosp_redfin.mk
index deda1b4899488e78f68959dab46f6008fbb76555..71986ef4f38ea934604e0b4b21e9dd6f069ea11f 100644
--- a/aosp_redfin.mk
+++ b/aosp_redfin.mk
@@ -7,20 +7,22 @@
 #
 #      http://www.apache.org/licenses/LICENSE-2.0
 #
 # Unless required by applicable law or agreed to in writing, software
 # distributed under the License is distributed on an "AS IS" BASIS,
 # WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 # See the License for the specific language governing permissions and
 # limitations under the License.
 #
 
+PRODUCT_SOONG_NAMESPACES += vendor/google_devices/redfin
+
 #
 # All components inherited here go to system image
 #
 ifeq (,$(filter %_64,$(TARGET_PRODUCT)))
 $(call inherit-product, $(SRC_TARGET_DIR)/product/core_64_bit.mk)
 else
 $(call inherit-product, $(SRC_TARGET_DIR)/product/core_64_bit_only.mk)
 endif
 $(call inherit-product, $(SRC_TARGET_DIR)/product/generic_system.mk)
 

commit 152c25840c280006807c4588474c7c0c1d2655dc (HEAD, tag: SQ1A.220205.002.2022020800, tag: SQ1A.220105.002.2022010500, m/master, grapheneos/12)
Author: Daniel Micay <danielmicay@gmail.com>
Date:   Tue 2021-10-26 09:16:47-0400

    [temporary] disable broken AvoidAppsInCutoutOverlay
---
 device-redfin.mk | 1 -
 1 file changed, 1 deletion(-)

diff --git a/device-redfin.mk b/device-redfin.mk
index 5013fa260a828b827701ff1c8a7a283c69331357..8bfa930885f9b93311ff31071e6dbea52177aa03 100644
--- a/device-redfin.mk
+++ b/device-redfin.mk
@@ -227,21 +227,20 @@ PRODUCT_COPY_FILES += \
     $(LOCAL_PATH)/bluetooth_power_limits_redfin_us.csv:$(TARGET_COPY_OUT_VENDOR)/etc/bluetooth_power_limits_US.csv \
     $(LOCAL_PATH)/bluetooth_power_limits_redfin_eu.csv:$(TARGET_COPY_OUT_VENDOR)/etc/bluetooth_power_limits_EU.csv \
     $(LOCAL_PATH)/bluetooth_power_limits_redfin_jp.csv:$(TARGET_COPY_OUT_VENDOR)/etc/bluetooth_power_limits_JP.csv
 
 # Set support hide display cutout feature
 PRODUCT_PRODUCT_PROPERTIES += \
     ro.support_hide_display_cutout=true
 
 PRODUCT_PACKAGES += \
     NoCutoutOverlay \
-    AvoidAppsInCutoutOverlay
 
 # (b/183612348): Enable skia reduceOpsTaskSplitting
 PRODUCT_PROPERTY_OVERRIDES += \
     renderthread.skia.reduceopstasksplitting=true
 
 # Include the redfin product FCM.
 # Vendor Freeze system-only builds use a different FCM.
 ifneq ($(PRODUCT_VENDOR_FREEZE_SYSTEM_BUILD),true)
 PRODUCT_PACKAGES += redfin_product_compatibility_matrix.xml
 endif
